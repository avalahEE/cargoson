<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="choose_delivery_carrier_view_form_cargoson" model="ir.ui.view">
        <field name="name">choose.delivery.carrier.form</field>
        <field name="model">choose.delivery.carrier</field>
        <field name="inherit_id" ref="delivery.choose_delivery_carrier_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/field[@name='available_carrier_ids']" position="after">
                <field name="is_fixed_width" invisible="1"/>
                <field name="is_fixed_height" invisible="1"/>
                <field name="is_fixed_depth" invisible="1"/>
                <field name="cargoson_no_carrier" invisible="1" />
                <table attrs="{'invisible': [('delivery_type', '!=', 'cargoson')]}">
                    <tbody>
                        <tr>
                            <td>
                                <label for="cargoson_collection_address" />
                            </td>
                            <td>
                                <field name="cargoson_collection_address" readonly="1" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_delivery_address" />
                            </td>
                            <td>
                                <field name="cargoson_delivery_address" readonly="1" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2"><br /></td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_collection_date" />
                            </td>
                            <td>
                                <field name="cargoson_collection_date" attrs="{'readonly': [('cargoson_selected_carrier_id', '!=', 0)]}" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_package_type" />
                            </td>
                            <td>
                                <field name="cargoson_package_type" />
                            </td>
                        </tr>
                        <tr attrs="{'invisible': [('cargoson_package_type', '=', False)]}">
                            <td>
                                <label for="cargoson_package_qty" />
                            </td>
                            <td>
                                <field name="cargoson_package_qty" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_weight" />
                            </td>
                            <td>
                                <field name="cargoson_weight" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_width" />
                            </td>
                            <td>
                                <field name="cargoson_width" attrs="{'readonly': [('is_fixed_width', '=', True)]}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_depth" />
                            </td>
                            <td>
                                <field name="cargoson_depth" attrs="{'readonly': [('is_fixed_depth', '=', True)]}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_height" />
                            </td>
                            <td>
                                <field name="cargoson_height" attrs="{'readonly': [('is_fixed_height', '=', True)]}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_collection_prenotification" />
                            </td>
                            <td>
                                <field name="cargoson_collection_prenotification" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_collection_with_tail_lift" />
                            </td>
                            <td>
                                <field name="cargoson_collection_with_tail_lift" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_delivery_prenotification" />
                            </td>
                            <td>
                                <field name="cargoson_delivery_prenotification" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_delivery_with_tail_lift" />
                            </td>
                            <td>
                                <field name="cargoson_delivery_with_tail_lift" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_delivery_return_document" />
                            </td>
                            <td>
                                <field name="cargoson_delivery_return_document" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_delivery_to_private_person" />
                            </td>
                            <td>
                                <field name="cargoson_delivery_to_private_person" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_frigo" />
                            </td>
                            <td>
                                <field name="cargoson_frigo" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cargoson_adr" />
                            </td>
                            <td>
                                <field name="cargoson_adr" />
                            </td>
                        </tr>
                        <tr attrs="{'invisible': [('cargoson_adr', '=', False)]}">
                            <td>
                                <label for="ADR_UN" />
                            </td>
                            <td>
                                <field name="ADR_UN" />
                            </td>
                        </tr>
                        <tr attrs="{'invisible': [('cargoson_adr', '=', False)]}">
                            <td>
                                <label for="ADR_GROUP" />
                            </td>
                            <td>
                                <field name="ADR_GROUP" />
                            </td>
                        </tr>
                        <tr attrs="{'invisible': [('cargoson_adr', '=', False)]}">
                            <td>
                                <label for="ADR_CLASS" />
                            </td>
                            <td>
                                <field name="ADR_CLASS" />
                            </td>
                        </tr>
                        <tr attrs="{'invisible': [('cargoson_adr', '=', False)]}">
                            <td>
                                <label for="ADR_NEQ" />
                            </td>
                            <td>
                                <field name="ADR_NEQ" />
                            </td>
                        </tr>
                        <tr attrs="{'invisible': [('cargoson_adr', '=', False)]}">
                            <td>
                                <label for="ADR_DESCRIPTION" />
                            </td>
                            <td>
                                <field name="ADR_DESCRIPTION" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </xpath>

            <xpath expr="//field[@name='display_price']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('carrier_id','=', False), ('cargoson_no_carrier','=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='update_price']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('delivery_type','in', ('fixed', 'base_on_rule')), ('cargoson_no_carrier','=', True)]}</attribute>
            </xpath>

            <xpath expr="//form/footer" position="before">
                <field name="cargoson_selected_carrier_id" invisible="1" />
                <field name="cargoson_show_rates" invisible="1" />
                <field
                    name="cargoson_rate_results"
                    readonly="1"
                    options="{'no_create': True, 'no_open': True}"
                    attrs="{'invisible': ['|', ('delivery_type', '!=', 'cargoson'), ('cargoson_show_rates', '=', False)]}">
                    <tree string="Available prices">
                        <field name="carrier" />
                        <field name="price" widget="monetary" />
                        <field name="service" />
                        <field name="estimated_collection_date"/>
                        <field name="estimated_delivery_date"/>
                        <button string="Select" name="select_carrier" type="object" />
                    </tree>
                </field>
                <div
                    class="o_row"
                    attrs="{'invisible': ['|', ('delivery_type', '!=', 'cargoson'), ('cargoson_selected_carrier_id', '=', 0)]}">
                    <label for="cargoson_selected_carrier_name" />
                    <field name="cargoson_selected_carrier_name" readonly="1" />
                </div>
            </xpath>
        </field>
    </record>

    <record id="view_cargoson_rate_results" model="ir.ui.view">
        <field name="name">cargoson.rate.result.tree</field>
        <field name="model">cargoson.rate.result</field>
        <field name="arch" type="xml">
            <tree string="Available prices">
                <field name="carrier" />
                <field name="price" />
                <field name="service" />
                <field name="unit" />
                <field name="type" />
            </tree>
        </field>
    </record>
</odoo>
